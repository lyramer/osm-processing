log in using
shell> mysql -u root -p

## ANALYTICS
SELECT 
	TYPE, 
	COUNT(*) AS COUNT 
FROM HISTORIES 
WHERE TYPE IS NOT NULL AND MUNICIPALITY LIKE 'Oak Bay'
GROUP BY TYPE 
ORDER BY TYPE;

SELECT JSON_OBJECT(
	'type', h.TYPE, 
	'count', COUNT(*)
) FROM HISTORIES h
WHERE DISPLAY = 1 AND TYPE IS NOT NULL AND MUNICIPALITY LIKE 'Oak Bay'
GROUP BY TYPE;


##  GET THE TYPES
    SELECT JSON_OBJECT(
    'type', h.TYPE, 
    'count', COUNT(*)
    ) FROM HISTORIES h
    WHERE DISPLAY = 1 AND 
	TYPE IS NOT NULL AND 
	MUNICIPALITY LIKE 'Esquimalt'
    GROUP BY TYPE;


## GET THE ORIGINS
    SELECT JSON_OBJECT(
    'origin', h.ORIGIN, 
    'count', COUNT(*)
    ) FROM HISTORIES h
    WHERE DISPLAY = 1 AND 
	ORIGIN IS NOT NULL AND 
	MUNICIPALITY LIKE 'Esquimalt'
    GROUP BY ORIGIN;

## GET THE OCCS
    SELECT JSON_OBJECT(
    'occ', h.OCC, 
    'count', COUNT(*)
    ) FROM HISTORIES h
    WHERE DISPLAY = 1 AND 
	OCC IS NOT NULL AND
	MUNICIPALITY LIKE 'Esquimalt'
    GROUP BY OCC;
